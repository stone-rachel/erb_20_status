<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ERB RUNNERS · Team Board</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800;900&display=swap" rel="stylesheet" />

    <style>
      /* ===== (CSS는 기존 그대로, 검색 관련 CSS는 남겨둬도 무방) ===== */
      :root {
        --bg:#f6f7f9; --card:#fff; --text:#101828; --sub:#667085; --muted:#98a2b3;
        --line:rgba(16,24,40,.08);
        --shadow:0 10px 30px rgba(16,24,40,.08);
        --shadow2:0 6px 18px rgba(16,24,40,.06);
        --gold:#f6c343; --silver:#cfd6e6; --bronze:#c97b4a;
        --blue:#3182f6; --blue2:#1d4ed8;
        --radius:22px;
      }
      *{box-sizing:border-box}
      body{
        margin:0; background:var(--bg); color:var(--text);
        font-family:SUIT,Pretendard,system-ui,sans-serif;
      }
      .wrap{max-width:780px;margin:0 auto;padding:18px 14px 32px}
      header{text-align:left}
      .brand{display:flex;gap:10px;margin-bottom:12px}
      .logo{width:38px;height:38px;border-radius:14px;background:linear-gradient(135deg,#3182f6,#a78bfa)}
      .brandTitle{font-weight:800;font-size:14px}
      .brandSub{font-size:12px;color:var(--sub)}
      .hero{background:#fff;border:1px solid var(--line);border-radius:22px;padding:16px;box-shadow:var(--shadow)}
      .heroTop{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
      h1{margin:0;font-size:36px;font-weight:900}
      .subtitle{font-size:13px;color:var(--sub);margin-top:6px}
      .controls{display:flex;gap:10px}
      .btn{
        border:none;border-radius:999px;padding:10px 14px;
        background:rgba(49,130,246,.1);color:var(--blue2);
        font-weight:800;cursor:pointer;
      }
      main{margin-top:14px}
      .row{
        background:#fff;border:1px solid var(--line);border-radius:28px;
        padding:18px;margin:18px 0;box-shadow:var(--shadow2);
        display:grid;grid-template-columns:1fr auto;gap:16px;
        position:relative;
      }
      .leftBlock{display:flex;gap:14px}
      .rankBadge{
        width:62px;height:62px;border-radius:18px;
        display:grid;place-items:center;font-weight:900;
        color:#fff;background:#94a3b8;
      }
      .rankBadge.gold{background:linear-gradient(135deg,#ffcc33,#ffb000)}
      .rankBadge.silver{background:linear-gradient(135deg,#c9d4e6,#95a6c6)}
      .rankBadge.bronze{background:linear-gradient(135deg,#d98a4f,#b8612f)}
      .team{font-size:22px;font-weight:800}
      .members{font-size:14px;color:var(--sub);margin-top:6px}
      .right{text-align:right}
      .total{font-size:44px;font-weight:700}
      .perfectSticker{
        position:absolute;top:-14px;right:18px;
        padding:6px 12px;border-radius:999px;
        font-weight:800;background:#fff;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo"></div>
          <div>
            <div class="brandTitle">ERB RUNNERS</div>
            <div class="brandSub">팀 현황 · 자동 순위 · Perfect 표시</div>
          </div>
        </div>

        <div class="hero">
          <div class="heroTop">
            <div>
              <h1 id="weekTitle">Week</h1>
              <div class="subtitle" id="subtitle"></div>
            </div>
            <div class="controls">
              <button class="btn" id="copyLink">현재 상태 링크 복사</button>
            </div>
          </div>
        </div>
      </header>

      <main>
        <div id="board"></div>
      </main>
    </div>

    <script>
      /* =====================
         기본 설정
      ===================== */
      const SCORE_MAX = { R:245, Z:10, E:0 };
      const TOTAL_MAX = SCORE_MAX.R + SCORE_MAX.Z + SCORE_MAX.E;

      const DEFAULT_DATA = [
        { team:"꾸준히매일읽(1)조", members:["구재연","양송빈","신은섭","김자연","신찬희"], R:196,Z:10,E:0 },
        { team:"JOY", members:["송솔내","김초원","송미소","김예지","이지원"], R:178,Z:10,E:0 },
        { team:"완독하조", members:["임다희","황은정","엄주용","이수현","류연우"], R:196,Z:10,E:0 },
      ];

      let state = structuredClone(DEFAULT_DATA);

      function calcTotal(t){
        return (t.R||0)+(t.Z||0)+(t.E||0);
      }
      function isPerfect(t){
        return calcTotal(t) === TOTAL_MAX;
      }

      function render(){
        const sorted = [...state].sort((a,b)=>{
          const ta = calcTotal(a), tb = calcTotal(b);
          if(tb!==ta) return tb-ta;
          return a.team.localeCompare(b.team,"ko");
        });

        const board = document.getElementById("board");
        board.innerHTML = sorted.map((t,i)=>`
          <div class="row">
            ${isPerfect(t)?`<div class="perfectSticker">Perfect</div>`:""}
            <div class="leftBlock">
              <div class="rankBadge ${i===0?"gold":i===1?"silver":i===2?"bronze":""}">${i+1}</div>
              <div>
                <div class="team">${t.team}</div>
                <div class="members">${t.members.join(", ")}</div>
              </div>
            </div>
            <div class="right">
              <div class="total">${calcTotal(t)}</div>
            </div>
          </div>
        `).join("");
      }

      document.getElementById("copyLink").addEventListener("click",()=>{
        navigator.clipboard.writeText(location.href);
        alert("링크를 복사했습니다.");
      });

      render();
    </script>
  </body>
</html>
